<ui:component xmlns=""
              xmlns:ui="http://java.sun.com/jsf/facelets"
              xmlns:composite="http://java.sun.com/jsf/composite"
              xmlns:f="http://java.sun.com/jsf/core"
              xmlns:h="http://java.sun.com/jsf/html"
              xmlns:c="http://java.sun.com/jsp/jstl/core">
    <composite:interface componentType="at.irian.InputSuggest">
        <!-- the id of the component -->
        <composite:attribute name="id" required="true" default=""/>

        <composite:editableValueHolder name="valueHolder"/>

        <composite:attribute name="value" required="true"/>
        <!-- the id of the component -->
        <composite:attribute name="label" default=""/>
        <!-- the model/controller part for the inputSuggest -->
        <composite:attribute name="model" default=""/>
        <!-- the label style class -->
        <composite:attribute name="labelStyleClass" default=""/>
        <!-- the input style class -->
        <composite:attribute name="inputStyleClass" default=""/>
        <!-- the message class -->
        <composite:attribute name="messageClass" default=""/>
        <!-- the selector identifier which allows to identify the lines of the suggest part -->
        <composite:attribute name="selectorIdentifier" default="ul li"/>

        <composite:facet name="suggestArea"/>

    </composite:interface>
    <composite:implementation>
        <div id="#{cc.clientId}">
            <!-- we wrap our cc into a div for easier ajaxing from outside -->
            <h:panelGroup layout="inputSuggest block" id="#{cc.attrs.id}">


                <!--
                Now to the input suggest part, the entire input suggest consists
                of three parts, the input area on top with a label, an input field
                and a message field

                the second part is the suggest area with a fillable container
                which is dragged in by the user
                -->

                <h:panelGroup styleClass="inputArea" layout="block">
                    <h:outputLabel value="#{cc.attrs.label}" for="valueHolder"
                                   styleClass="label #{cc.attrs.labelStyleClass}"/>
                    <h:inputText id="valueHolder" styleClass="inputText #{cc.attrs.inputStyleClass}"
                                 value="#{cc.attrs.value}"/>
                    <h:message for="valueHolder" styleClass="message #{cc.attrs.messageClass} "/>
                </h:panelGroup>

                <h:panelGroup layout="block" styleClass="suggestArea" id="placeHolder">
                    <composite:renderFacet name="suggestArea"/>
                </h:panelGroup>

                <script type="text/javascript">
                    var inputSuggest_#{cc.attrs.id} = new extras.apache.TypeAhead({
                        id:"#{cc.clientId}:#{cc.attrs.id}",
                        valueHolderId:"#{cc.clientId}:valueHolder",
                        placeHolderId:"#{cc.clientId}:placeHolder",
                        selectorIdentifier:"#{cc.attrs.selectorIdentifier}"
                    });
                </script>
            </h:panelGroup>
        </div>
    </composite:implementation>
</ui:component>