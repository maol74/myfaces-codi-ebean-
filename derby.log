2010-12-18 15:28:52.560 GMT Thread[qtp1005639669-79,5,main] Cleanup action starting
java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(Unknown Source)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:35)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:46)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:33)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:244)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:286)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:341)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:305)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.jdbc.schema.DataSourceFactory$DefaultsDataSource.getConnection(DataSourceFactory.java:325)
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:91)
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:598)
	at org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1489)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:507)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:432)
	at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
	at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
	at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:939)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:930)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:639)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:206)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:188)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.<init>(AbstractBrokerFactory.java:157)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.<init>(JDBCBrokerFactory.java:86)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newInstance(JDBCBrokerFactory.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
	at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:148)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:94)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:154)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:65)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceUnit(StandaloneResourceProcessor.java:141)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceContext(StandaloneResourceProcessor.java:154)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getEntityManager(StandaloneResourceProcessor.java:70)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.getResourceReference(StandaloneResourceInjectionService.java:65)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.injectJavaEEResources(StandaloneResourceInjectionService.java:96)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectResources(AbstractInjectionTargetBean.java:414)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:147)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:117)
	at org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:208)
	at org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:82)
	at org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:145)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:166)
	at org.apache.webbeans.context.DependentContext.getInstance(DependentContext.java:69)
	at org.apache.webbeans.context.AbstractContext.get(AbstractContext.java:191)
	at org.apache.webbeans.container.BeanManagerImpl.getReference(BeanManagerImpl.java:839)
	at org.apache.webbeans.container.BeanManagerImpl.getInjectableReference(BeanManagerImpl.java:723)
	at org.apache.webbeans.inject.AbstractInjectable.inject(AbstractInjectable.java:134)
	at org.apache.webbeans.inject.InjectableField.doInjection(InjectableField.java:60)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectField(AbstractInjectionTargetBean.java:366)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectFields(AbstractInjectionTargetBean.java:324)
	at org.apache.webbeans.portable.creation.InjectionTargetProducer.inject(InjectionTargetProducer.java:96)
	at org.apache.webbeans.component.InjectionTargetWrapper.inject(InjectionTargetWrapper.java:80)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:167)
	at org.apache.webbeans.container.SerializableBean.create(SerializableBean.java:128)
	at org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:63)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.createNewBeanInstance(ConversationBeanEntry.java:127)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.getBeanInstance(ConversationBeanEntry.java:84)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:93)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:57)
	at org.apache.webbeans.context.CustomContextImpl.get(CustomContextImpl.java:43)
	at org.apache.webbeans.context.CustomPassivatingContextImpl.get(CustomPassivatingContextImpl.java:41)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.getContextualInstance(NormalScopedBeanInterceptorHandler.java:135)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.invoke(NormalScopedBeanInterceptorHandler.java:95)
	at ui.person.PersonListView_$$_javassist_19.toString(PersonListView_$$_javassist_19.java)
	at java.text.MessageFormat.subformat(MessageFormat.java:1246)
	at java.text.MessageFormat.format(MessageFormat.java:836)
	at java.text.Format.format(Format.java:140)
	at java.text.MessageFormat.format(MessageFormat.java:812)
	at com.sun.el.util.MessageFactory.getArray(MessageFactory.java:86)
	at com.sun.el.util.MessageFactory.get(MessageFactory.java:71)
	at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155)
	at com.sun.el.parser.AstValue.invoke(AstValue.java:231)
	at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
	at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)
	at org.apache.myfaces.view.facelets.tag.jsf.core.EventHandler$Listener.processEvent(EventHandler.java:230)
	at javax.faces.component.UIComponent$EventListenerWrapper.processEvent(UIComponent.java:1098)
	at javax.faces.event.SystemEvent.processListener(SystemEvent.java:43)
	at org.apache.myfaces.application.ApplicationImpl._traverseListenerList(ApplicationImpl.java:2110)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:542)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:572)
	at org.apache.webbeans.jsf.OwbApplication.publishEvent(OwbApplication.java:484)
	at javax.faces.application.ApplicationWrapper.publishEvent(ApplicationWrapper.java:335)
	at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:72)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
	at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:87)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:516)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
	at org.eclipse.jetty.server.Server.handle(Server.java:353)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1059)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:590)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:212)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
	... 134 more
============= begin nested exception, level (1) ===========
java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(Unknown Source)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:35)
	at com.atomikos.datasource.pool.ConnectionPool.init(ConnectionPool.java:46)
	at com.atomikos.datasource.pool.ConnectionPool.<init>(ConnectionPool.java:33)
	at com.atomikos.jdbc.AbstractDataSourceBean.init(AbstractDataSourceBean.java:244)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:286)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:341)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:305)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.jdbc.schema.DataSourceFactory$DefaultsDataSource.getConnection(DataSourceFactory.java:325)
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:91)
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:598)
	at org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1489)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:507)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:432)
	at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
	at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
	at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:939)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:930)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:639)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:206)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:188)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.<init>(AbstractBrokerFactory.java:157)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.<init>(JDBCBrokerFactory.java:86)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newInstance(JDBCBrokerFactory.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
	at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:148)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:94)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:154)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:65)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceUnit(StandaloneResourceProcessor.java:141)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceContext(StandaloneResourceProcessor.java:154)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getEntityManager(StandaloneResourceProcessor.java:70)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.getResourceReference(StandaloneResourceInjectionService.java:65)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.injectJavaEEResources(StandaloneResourceInjectionService.java:96)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectResources(AbstractInjectionTargetBean.java:414)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:147)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:117)
	at org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:208)
	at org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:82)
	at org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:145)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:166)
	at org.apache.webbeans.context.DependentContext.getInstance(DependentContext.java:69)
	at org.apache.webbeans.context.AbstractContext.get(AbstractContext.java:191)
	at org.apache.webbeans.container.BeanManagerImpl.getReference(BeanManagerImpl.java:839)
	at org.apache.webbeans.container.BeanManagerImpl.getInjectableReference(BeanManagerImpl.java:723)
	at org.apache.webbeans.inject.AbstractInjectable.inject(AbstractInjectable.java:134)
	at org.apache.webbeans.inject.InjectableField.doInjection(InjectableField.java:60)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectField(AbstractInjectionTargetBean.java:366)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectFields(AbstractInjectionTargetBean.java:324)
	at org.apache.webbeans.portable.creation.InjectionTargetProducer.inject(InjectionTargetProducer.java:96)
	at org.apache.webbeans.component.InjectionTargetWrapper.inject(InjectionTargetWrapper.java:80)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:167)
	at org.apache.webbeans.container.SerializableBean.create(SerializableBean.java:128)
	at org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:63)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.createNewBeanInstance(ConversationBeanEntry.java:127)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.getBeanInstance(ConversationBeanEntry.java:84)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:93)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:57)
	at org.apache.webbeans.context.CustomContextImpl.get(CustomContextImpl.java:43)
	at org.apache.webbeans.context.CustomPassivatingContextImpl.get(CustomPassivatingContextImpl.java:41)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.getContextualInstance(NormalScopedBeanInterceptorHandler.java:135)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.invoke(NormalScopedBeanInterceptorHandler.java:95)
	at ui.person.PersonListView_$$_javassist_19.toString(PersonListView_$$_javassist_19.java)
	at java.text.MessageFormat.subformat(MessageFormat.java:1246)
	at java.text.MessageFormat.format(MessageFormat.java:836)
	at java.text.Format.format(Format.java:140)
	at java.text.MessageFormat.format(MessageFormat.java:812)
	at com.sun.el.util.MessageFactory.getArray(MessageFactory.java:86)
	at com.sun.el.util.MessageFactory.get(MessageFactory.java:71)
	at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155)
	at com.sun.el.parser.AstValue.invoke(AstValue.java:231)
	at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
	at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)
	at org.apache.myfaces.view.facelets.tag.jsf.core.EventHandler$Listener.processEvent(EventHandler.java:230)
	at javax.faces.component.UIComponent$EventListenerWrapper.processEvent(UIComponent.java:1098)
	at javax.faces.event.SystemEvent.processListener(SystemEvent.java:43)
	at org.apache.myfaces.application.ApplicationImpl._traverseListenerList(ApplicationImpl.java:2110)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:542)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:572)
	at org.apache.webbeans.jsf.OwbApplication.publishEvent(OwbApplication.java:484)
	at javax.faces.application.ApplicationWrapper.publishEvent(ApplicationWrapper.java:335)
	at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:72)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
	at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:87)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:516)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
	at org.eclipse.jetty.server.Server.handle(Server.java:353)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1059)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:590)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:212)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
	at java.lang.Thread.run(Thread.java:680)
============= end nested exception, level (1) ===========
Cleanup action completed
2010-12-18 15:28:52.577 GMT Thread[qtp1005639669-79,5,main] Cleanup action starting
java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(Unknown Source)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:35)
	at com.atomikos.datasource.pool.ConnectionPool.growPool(ConnectionPool.java:162)
	at com.atomikos.datasource.pool.ConnectionPool.borrowConnection(ConnectionPool.java:117)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:289)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:341)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:305)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.jdbc.schema.DataSourceFactory$DefaultsDataSource.getConnection(DataSourceFactory.java:325)
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:91)
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:598)
	at org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1489)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:507)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:432)
	at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
	at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
	at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:939)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:930)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:639)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:206)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:188)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.<init>(AbstractBrokerFactory.java:157)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.<init>(JDBCBrokerFactory.java:86)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newInstance(JDBCBrokerFactory.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
	at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:148)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:94)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:154)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:65)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceUnit(StandaloneResourceProcessor.java:141)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceContext(StandaloneResourceProcessor.java:154)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getEntityManager(StandaloneResourceProcessor.java:70)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.getResourceReference(StandaloneResourceInjectionService.java:65)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.injectJavaEEResources(StandaloneResourceInjectionService.java:96)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectResources(AbstractInjectionTargetBean.java:414)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:147)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:117)
	at org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:208)
	at org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:82)
	at org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:145)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:166)
	at org.apache.webbeans.context.DependentContext.getInstance(DependentContext.java:69)
	at org.apache.webbeans.context.AbstractContext.get(AbstractContext.java:191)
	at org.apache.webbeans.container.BeanManagerImpl.getReference(BeanManagerImpl.java:839)
	at org.apache.webbeans.container.BeanManagerImpl.getInjectableReference(BeanManagerImpl.java:723)
	at org.apache.webbeans.inject.AbstractInjectable.inject(AbstractInjectable.java:134)
	at org.apache.webbeans.inject.InjectableField.doInjection(InjectableField.java:60)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectField(AbstractInjectionTargetBean.java:366)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectFields(AbstractInjectionTargetBean.java:324)
	at org.apache.webbeans.portable.creation.InjectionTargetProducer.inject(InjectionTargetProducer.java:96)
	at org.apache.webbeans.component.InjectionTargetWrapper.inject(InjectionTargetWrapper.java:80)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:167)
	at org.apache.webbeans.container.SerializableBean.create(SerializableBean.java:128)
	at org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:63)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.createNewBeanInstance(ConversationBeanEntry.java:127)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.getBeanInstance(ConversationBeanEntry.java:84)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:93)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:57)
	at org.apache.webbeans.context.CustomContextImpl.get(CustomContextImpl.java:43)
	at org.apache.webbeans.context.CustomPassivatingContextImpl.get(CustomPassivatingContextImpl.java:41)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.getContextualInstance(NormalScopedBeanInterceptorHandler.java:135)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.invoke(NormalScopedBeanInterceptorHandler.java:95)
	at ui.person.PersonListView_$$_javassist_19.toString(PersonListView_$$_javassist_19.java)
	at java.text.MessageFormat.subformat(MessageFormat.java:1246)
	at java.text.MessageFormat.format(MessageFormat.java:836)
	at java.text.Format.format(Format.java:140)
	at java.text.MessageFormat.format(MessageFormat.java:812)
	at com.sun.el.util.MessageFactory.getArray(MessageFactory.java:86)
	at com.sun.el.util.MessageFactory.get(MessageFactory.java:71)
	at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155)
	at com.sun.el.parser.AstValue.invoke(AstValue.java:231)
	at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
	at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)
	at org.apache.myfaces.view.facelets.tag.jsf.core.EventHandler$Listener.processEvent(EventHandler.java:230)
	at javax.faces.component.UIComponent$EventListenerWrapper.processEvent(UIComponent.java:1098)
	at javax.faces.event.SystemEvent.processListener(SystemEvent.java:43)
	at org.apache.myfaces.application.ApplicationImpl._traverseListenerList(ApplicationImpl.java:2110)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:542)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:572)
	at org.apache.webbeans.jsf.OwbApplication.publishEvent(OwbApplication.java:484)
	at javax.faces.application.ApplicationWrapper.publishEvent(ApplicationWrapper.java:335)
	at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:72)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
	at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:87)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:516)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
	at org.eclipse.jetty.server.Server.handle(Server.java:353)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1059)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:590)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:212)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
	... 133 more
============= begin nested exception, level (1) ===========
java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(Unknown Source)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:35)
	at com.atomikos.datasource.pool.ConnectionPool.growPool(ConnectionPool.java:162)
	at com.atomikos.datasource.pool.ConnectionPool.borrowConnection(ConnectionPool.java:117)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:289)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:341)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:305)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.jdbc.schema.DataSourceFactory$DefaultsDataSource.getConnection(DataSourceFactory.java:325)
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:91)
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:598)
	at org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1489)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:507)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:432)
	at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
	at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
	at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:939)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:930)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:639)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:206)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:188)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.<init>(AbstractBrokerFactory.java:157)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.<init>(JDBCBrokerFactory.java:86)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newInstance(JDBCBrokerFactory.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
	at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:148)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:94)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:154)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:65)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceUnit(StandaloneResourceProcessor.java:141)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceContext(StandaloneResourceProcessor.java:154)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getEntityManager(StandaloneResourceProcessor.java:70)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.getResourceReference(StandaloneResourceInjectionService.java:65)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.injectJavaEEResources(StandaloneResourceInjectionService.java:96)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectResources(AbstractInjectionTargetBean.java:414)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:147)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:117)
	at org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:208)
	at org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:82)
	at org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:145)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:166)
	at org.apache.webbeans.context.DependentContext.getInstance(DependentContext.java:69)
	at org.apache.webbeans.context.AbstractContext.get(AbstractContext.java:191)
	at org.apache.webbeans.container.BeanManagerImpl.getReference(BeanManagerImpl.java:839)
	at org.apache.webbeans.container.BeanManagerImpl.getInjectableReference(BeanManagerImpl.java:723)
	at org.apache.webbeans.inject.AbstractInjectable.inject(AbstractInjectable.java:134)
	at org.apache.webbeans.inject.InjectableField.doInjection(InjectableField.java:60)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectField(AbstractInjectionTargetBean.java:366)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectFields(AbstractInjectionTargetBean.java:324)
	at org.apache.webbeans.portable.creation.InjectionTargetProducer.inject(InjectionTargetProducer.java:96)
	at org.apache.webbeans.component.InjectionTargetWrapper.inject(InjectionTargetWrapper.java:80)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:167)
	at org.apache.webbeans.container.SerializableBean.create(SerializableBean.java:128)
	at org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:63)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.createNewBeanInstance(ConversationBeanEntry.java:127)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.getBeanInstance(ConversationBeanEntry.java:84)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.create(AbstractGroupedConversationContext.java:93)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:57)
	at org.apache.webbeans.context.CustomContextImpl.get(CustomContextImpl.java:43)
	at org.apache.webbeans.context.CustomPassivatingContextImpl.get(CustomPassivatingContextImpl.java:41)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.getContextualInstance(NormalScopedBeanInterceptorHandler.java:135)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.invoke(NormalScopedBeanInterceptorHandler.java:95)
	at ui.person.PersonListView_$$_javassist_19.toString(PersonListView_$$_javassist_19.java)
	at java.text.MessageFormat.subformat(MessageFormat.java:1246)
	at java.text.MessageFormat.format(MessageFormat.java:836)
	at java.text.Format.format(Format.java:140)
	at java.text.MessageFormat.format(MessageFormat.java:812)
	at com.sun.el.util.MessageFactory.getArray(MessageFactory.java:86)
	at com.sun.el.util.MessageFactory.get(MessageFactory.java:71)
	at com.sun.el.util.ReflectionUtil.getMethod(ReflectionUtil.java:155)
	at com.sun.el.parser.AstValue.invoke(AstValue.java:231)
	at com.sun.el.MethodExpressionImpl.invoke(MethodExpressionImpl.java:297)
	at org.apache.myfaces.view.facelets.el.TagMethodExpression.invoke(TagMethodExpression.java:83)
	at org.apache.myfaces.view.facelets.tag.jsf.core.EventHandler$Listener.processEvent(EventHandler.java:230)
	at javax.faces.component.UIComponent$EventListenerWrapper.processEvent(UIComponent.java:1098)
	at javax.faces.event.SystemEvent.processListener(SystemEvent.java:43)
	at org.apache.myfaces.application.ApplicationImpl._traverseListenerList(ApplicationImpl.java:2110)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:542)
	at org.apache.myfaces.application.ApplicationImpl.publishEvent(ApplicationImpl.java:572)
	at org.apache.webbeans.jsf.OwbApplication.publishEvent(OwbApplication.java:484)
	at javax.faces.application.ApplicationWrapper.publishEvent(ApplicationWrapper.java:335)
	at org.apache.myfaces.lifecycle.RenderResponseExecutor.execute(RenderResponseExecutor.java:72)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:239)
	at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:87)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:516)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
	at org.eclipse.jetty.server.Server.handle(Server.java:353)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1059)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:590)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:212)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
	at java.lang.Thread.run(Thread.java:680)
============= end nested exception, level (1) ===========
Cleanup action completed
2010-12-18 15:28:52.649 GMT Thread[qtp1005639669-79,5,main] Cleanup action starting
java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(Unknown Source)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:35)
	at com.atomikos.datasource.pool.ConnectionPool.growPool(ConnectionPool.java:162)
	at com.atomikos.datasource.pool.ConnectionPool.borrowConnection(ConnectionPool.java:117)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:289)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:341)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:305)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.jdbc.schema.DataSourceFactory$DefaultsDataSource.getConnection(DataSourceFactory.java:325)
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:91)
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:598)
	at org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1489)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:507)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:432)
	at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
	at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
	at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:939)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:930)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:639)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:206)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:188)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.<init>(AbstractBrokerFactory.java:157)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.<init>(JDBCBrokerFactory.java:86)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newInstance(JDBCBrokerFactory.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
	at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:148)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:94)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:154)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:65)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceUnit(StandaloneResourceProcessor.java:141)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceContext(StandaloneResourceProcessor.java:154)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getEntityManager(StandaloneResourceProcessor.java:70)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.getResourceReference(StandaloneResourceInjectionService.java:65)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.injectJavaEEResources(StandaloneResourceInjectionService.java:96)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectResources(AbstractInjectionTargetBean.java:414)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:147)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:117)
	at org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:208)
	at org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:82)
	at org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:145)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:166)
	at org.apache.webbeans.context.DependentContext.getInstance(DependentContext.java:69)
	at org.apache.webbeans.context.AbstractContext.get(AbstractContext.java:191)
	at org.apache.webbeans.container.BeanManagerImpl.getReference(BeanManagerImpl.java:839)
	at org.apache.webbeans.container.BeanManagerImpl.getInjectableReference(BeanManagerImpl.java:723)
	at org.apache.webbeans.inject.AbstractInjectable.inject(AbstractInjectable.java:134)
	at org.apache.webbeans.inject.InjectableField.doInjection(InjectableField.java:60)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectField(AbstractInjectionTargetBean.java:366)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectFields(AbstractInjectionTargetBean.java:324)
	at org.apache.webbeans.portable.creation.InjectionTargetProducer.inject(InjectionTargetProducer.java:96)
	at org.apache.webbeans.component.InjectionTargetWrapper.inject(InjectionTargetWrapper.java:80)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:167)
	at org.apache.webbeans.container.SerializableBean.create(SerializableBean.java:128)
	at org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:63)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.createNewBeanInstance(ConversationBeanEntry.java:127)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.getBeanInstance(ConversationBeanEntry.java:84)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.DefaultConversation.getBean(DefaultConversation.java:124)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.GroupedConversationContext.resolveBeanInstance(GroupedConversationContext.java:92)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.resolve(AbstractGroupedConversationContext.java:101)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:74)
	at org.apache.webbeans.context.CustomContextImpl.get(CustomContextImpl.java:48)
	at org.apache.webbeans.context.CustomPassivatingContextImpl.get(CustomPassivatingContextImpl.java:47)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.getContextualInstance(NormalScopedBeanInterceptorHandler.java:127)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.invoke(NormalScopedBeanInterceptorHandler.java:95)
	at ui.person.PersonListView_$$_javassist_19.getSearchData(PersonListView_$$_javassist_19.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at javax.el.BeanELResolver.getValue(BeanELResolver.java:302)
	at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
	at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:116)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
	at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
	at org.apache.webbeans.el.WrappedValueExpression.getValue(WrappedValueExpression.java:68)
	at org.apache.myfaces.view.facelets.el.TagValueExpression.getValue(TagValueExpression.java:85)
	at javax.faces.component._ComponentAttributesMap.get(_ComponentAttributesMap.java:246)
	at org.apache.myfaces.el.unified.resolver.CompositeComponentELResolver$CompositeComponentAttributesMapWrapper.get(CompositeComponentELResolver.java:236)
	at javax.el.MapELResolver.getValue(MapELResolver.java:196)
	at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
	at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:116)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
	at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
	at org.apache.webbeans.el.WrappedValueExpression.getValue(WrappedValueExpression.java:68)
	at org.apache.myfaces.view.facelets.el.TagValueExpression.getValue(TagValueExpression.java:85)
	at org.apache.myfaces.view.facelets.el.LocationValueExpression.getValue(LocationValueExpression.java:90)
	at javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:243)
	at javax.faces.component.UIOutput.getValue(UIOutput.java:71)
	at javax.faces.component.UIInput.getValue(UIInput.java:143)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener$DebugVisitCallback._getRealValue(DebugPhaseListener.java:264)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener$DebugVisitCallback.visit(DebugPhaseListener.java:187)
	at org.apache.myfaces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:139)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:750)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:763)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener._doTreeVisit(DebugPhaseListener.java:310)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener.afterPhase(DebugPhaseListener.java:286)
	at org.apache.myfaces.lifecycle.PhaseListenerManager.informPhaseListenersAfter(PhaseListenerManager.java:111)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:250)
	at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:87)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:516)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
	at org.eclipse.jetty.server.Server.handle(Server.java:353)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1059)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:590)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:212)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
	at java.lang.Thread.run(Thread.java:680)
Caused by: java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
	... 162 more
============= begin nested exception, level (1) ===========
java.sql.SQLException: Database 'testdb' not found.
	at org.apache.derby.impl.jdbc.SQLExceptionFactory.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.wrapArgsForTransportAcrossDRDA(Unknown Source)
	at org.apache.derby.impl.jdbc.SQLExceptionFactory40.getSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.newEmbedSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.Util.generateCsSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.newSQLException(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.handleDBNotFound(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection30.<init>(Unknown Source)
	at org.apache.derby.impl.jdbc.EmbedConnection40.<init>(Unknown Source)
	at org.apache.derby.jdbc.Driver40.getNewEmbedConnection(Unknown Source)
	at org.apache.derby.jdbc.InternalDriver.connect(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedDataSource.getConnection(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.setupResourceAdapter(Unknown Source)
	at org.apache.derby.jdbc.EmbeddedXADataSource.getXAConnection(Unknown Source)
	at com.atomikos.jdbc.AtomikosXAConnectionFactory.createPooledConnection(AtomikosXAConnectionFactory.java:35)
	at com.atomikos.datasource.pool.ConnectionPool.growPool(ConnectionPool.java:162)
	at com.atomikos.datasource.pool.ConnectionPool.borrowConnection(ConnectionPool.java:117)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:289)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:341)
	at com.atomikos.jdbc.AbstractDataSourceBean.getConnection(AbstractDataSourceBean.java:305)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.lib.jdbc.DecoratingDataSource.getConnection(DecoratingDataSource.java:112)
	at org.apache.openjpa.lib.jdbc.DelegatingDataSource.getConnection(DelegatingDataSource.java:139)
	at org.apache.openjpa.jdbc.schema.DataSourceFactory$DefaultsDataSource.getConnection(DataSourceFactory.java:325)
	at org.apache.openjpa.jdbc.sql.DBDictionaryFactory.newDBDictionary(DBDictionaryFactory.java:91)
	at org.apache.openjpa.jdbc.conf.JDBCConfigurationImpl.getDBDictionaryInstance(JDBCConfigurationImpl.java:598)
	at org.apache.openjpa.jdbc.meta.MappingRepository.endConfiguration(MappingRepository.java:1489)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:507)
	at org.apache.openjpa.lib.conf.Configurations.configureInstance(Configurations.java:432)
	at org.apache.openjpa.lib.conf.PluginValue.instantiate(PluginValue.java:104)
	at org.apache.openjpa.conf.MetaDataRepositoryValue.instantiate(MetaDataRepositoryValue.java:68)
	at org.apache.openjpa.lib.conf.ObjectValue.instantiate(ObjectValue.java:83)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.newMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:939)
	at org.apache.openjpa.conf.OpenJPAConfigurationImpl.getMetaDataRepositoryInstance(OpenJPAConfigurationImpl.java:930)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.makeReadOnly(AbstractBrokerFactory.java:639)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:206)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.newBroker(AbstractBrokerFactory.java:188)
	at org.apache.openjpa.kernel.AbstractBrokerFactory.<init>(AbstractBrokerFactory.java:157)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.<init>(JDBCBrokerFactory.java:86)
	at org.apache.openjpa.jdbc.kernel.JDBCBrokerFactory.newInstance(JDBCBrokerFactory.java:61)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at org.apache.openjpa.kernel.Bootstrap.invokeFactory(Bootstrap.java:124)
	at org.apache.openjpa.kernel.Bootstrap.newBrokerFactory(Bootstrap.java:62)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.getBrokerFactory(PersistenceProviderImpl.java:148)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:94)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:154)
	at org.apache.openjpa.persistence.PersistenceProviderImpl.createEntityManagerFactory(PersistenceProviderImpl.java:65)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:152)
	at javax.persistence.Persistence.createEntityManagerFactory(Persistence.java:72)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceUnit(StandaloneResourceProcessor.java:141)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getPersistenceContext(StandaloneResourceProcessor.java:154)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceProcessor.getEntityManager(StandaloneResourceProcessor.java:70)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.getResourceReference(StandaloneResourceInjectionService.java:65)
	at org.apache.webbeans.resource.spi.se.StandaloneResourceInjectionService.injectJavaEEResources(StandaloneResourceInjectionService.java:96)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectResources(AbstractInjectionTargetBean.java:414)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createDefaultInstance(AbstractInjectionTargetBean.java:147)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.createInstance(AbstractInjectionTargetBean.java:117)
	at org.apache.webbeans.component.AbstractOwbBean.createNewInstance(AbstractOwbBean.java:208)
	at org.apache.webbeans.portable.creation.AbstractProducer.produce(AbstractProducer.java:82)
	at org.apache.webbeans.component.InjectionTargetWrapper.produce(InjectionTargetWrapper.java:145)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:166)
	at org.apache.webbeans.context.DependentContext.getInstance(DependentContext.java:69)
	at org.apache.webbeans.context.AbstractContext.get(AbstractContext.java:191)
	at org.apache.webbeans.container.BeanManagerImpl.getReference(BeanManagerImpl.java:839)
	at org.apache.webbeans.container.BeanManagerImpl.getInjectableReference(BeanManagerImpl.java:723)
	at org.apache.webbeans.inject.AbstractInjectable.inject(AbstractInjectable.java:134)
	at org.apache.webbeans.inject.InjectableField.doInjection(InjectableField.java:60)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectField(AbstractInjectionTargetBean.java:366)
	at org.apache.webbeans.component.AbstractInjectionTargetBean.injectFields(AbstractInjectionTargetBean.java:324)
	at org.apache.webbeans.portable.creation.InjectionTargetProducer.inject(InjectionTargetProducer.java:96)
	at org.apache.webbeans.component.InjectionTargetWrapper.inject(InjectionTargetWrapper.java:80)
	at org.apache.webbeans.component.AbstractOwbBean.create(AbstractOwbBean.java:167)
	at org.apache.webbeans.container.SerializableBean.create(SerializableBean.java:128)
	at org.apache.myfaces.extensions.cdi.core.impl.util.CodiUtils.createNewInstanceOfBean(CodiUtils.java:63)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.createNewBeanInstance(ConversationBeanEntry.java:127)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.ConversationBeanEntry.getBeanInstance(ConversationBeanEntry.java:84)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.DefaultConversation.getBean(DefaultConversation.java:124)
	at org.apache.myfaces.extensions.cdi.jsf.impl.scope.conversation.GroupedConversationContext.resolveBeanInstance(GroupedConversationContext.java:92)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.AbstractGroupedConversationContext.resolve(AbstractGroupedConversationContext.java:101)
	at org.apache.myfaces.extensions.cdi.core.impl.scope.conversation.ConversationContextAdapter.get(ConversationContextAdapter.java:74)
	at org.apache.webbeans.context.CustomContextImpl.get(CustomContextImpl.java:48)
	at org.apache.webbeans.context.CustomPassivatingContextImpl.get(CustomPassivatingContextImpl.java:47)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.getContextualInstance(NormalScopedBeanInterceptorHandler.java:127)
	at org.apache.webbeans.intercept.NormalScopedBeanInterceptorHandler.invoke(NormalScopedBeanInterceptorHandler.java:95)
	at ui.person.PersonListView_$$_javassist_19.getSearchData(PersonListView_$$_javassist_19.java)
	at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
	at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:39)
	at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:25)
	at java.lang.reflect.Method.invoke(Method.java:597)
	at javax.el.BeanELResolver.getValue(BeanELResolver.java:302)
	at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
	at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:116)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
	at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
	at org.apache.webbeans.el.WrappedValueExpression.getValue(WrappedValueExpression.java:68)
	at org.apache.myfaces.view.facelets.el.TagValueExpression.getValue(TagValueExpression.java:85)
	at javax.faces.component._ComponentAttributesMap.get(_ComponentAttributesMap.java:246)
	at org.apache.myfaces.el.unified.resolver.CompositeComponentELResolver$CompositeComponentAttributesMapWrapper.get(CompositeComponentELResolver.java:236)
	at javax.el.MapELResolver.getValue(MapELResolver.java:196)
	at javax.el.CompositeELResolver.getValue(CompositeELResolver.java:175)
	at org.apache.myfaces.el.unified.resolver.FacesCompositeELResolver.getValue(FacesCompositeELResolver.java:142)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:116)
	at com.sun.el.parser.AstValue.getValue(AstValue.java:163)
	at com.sun.el.ValueExpressionImpl.getValue(ValueExpressionImpl.java:219)
	at org.apache.webbeans.el.WrappedValueExpression.getValue(WrappedValueExpression.java:68)
	at org.apache.myfaces.view.facelets.el.TagValueExpression.getValue(TagValueExpression.java:85)
	at org.apache.myfaces.view.facelets.el.LocationValueExpression.getValue(LocationValueExpression.java:90)
	at javax.faces.component._DeltaStateHelper.eval(_DeltaStateHelper.java:243)
	at javax.faces.component.UIOutput.getValue(UIOutput.java:71)
	at javax.faces.component.UIInput.getValue(UIInput.java:143)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener$DebugVisitCallback._getRealValue(DebugPhaseListener.java:264)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener$DebugVisitCallback.visit(DebugPhaseListener.java:187)
	at org.apache.myfaces.component.visit.FullVisitContext.invokeVisitCallback(FullVisitContext.java:139)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:750)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:763)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at javax.faces.component.UIComponent.visitTree(UIComponent.java:770)
	at javax.faces.component.UIComponentBase.visitTree(UIComponentBase.java:991)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener._doTreeVisit(DebugPhaseListener.java:310)
	at org.apache.myfaces.view.facelets.tag.ui.DebugPhaseListener.afterPhase(DebugPhaseListener.java:286)
	at org.apache.myfaces.lifecycle.PhaseListenerManager.informPhaseListenersAfter(PhaseListenerManager.java:111)
	at org.apache.myfaces.lifecycle.LifecycleImpl.render(LifecycleImpl.java:250)
	at org.apache.myfaces.extensions.cdi.jsf2.impl.listener.phase.CodiLifecycleWrapper.render(CodiLifecycleWrapper.java:87)
	at javax.faces.webapp.FacesServlet.service(FacesServlet.java:191)
	at org.eclipse.jetty.servlet.ServletHolder.handle(ServletHolder.java:546)
	at org.eclipse.jetty.servlet.ServletHandler.doHandle(ServletHandler.java:483)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:119)
	at org.eclipse.jetty.security.SecurityHandler.handle(SecurityHandler.java:516)
	at org.eclipse.jetty.server.session.SessionHandler.doHandle(SessionHandler.java:230)
	at org.eclipse.jetty.server.handler.ContextHandler.doHandle(ContextHandler.java:956)
	at org.eclipse.jetty.servlet.ServletHandler.doScope(ServletHandler.java:411)
	at org.eclipse.jetty.server.session.SessionHandler.doScope(SessionHandler.java:188)
	at org.eclipse.jetty.server.handler.ContextHandler.doScope(ContextHandler.java:891)
	at org.eclipse.jetty.server.handler.ScopedHandler.handle(ScopedHandler.java:117)
	at org.eclipse.jetty.server.handler.ContextHandlerCollection.handle(ContextHandlerCollection.java:247)
	at org.eclipse.jetty.server.handler.HandlerCollection.handle(HandlerCollection.java:151)
	at org.eclipse.jetty.server.handler.HandlerWrapper.handle(HandlerWrapper.java:114)
	at org.eclipse.jetty.server.Server.handle(Server.java:353)
	at org.eclipse.jetty.server.HttpConnection.handleRequest(HttpConnection.java:598)
	at org.eclipse.jetty.server.HttpConnection$RequestHandler.headerComplete(HttpConnection.java:1059)
	at org.eclipse.jetty.http.HttpParser.parseNext(HttpParser.java:590)
	at org.eclipse.jetty.http.HttpParser.parseAvailable(HttpParser.java:212)
	at org.eclipse.jetty.server.HttpConnection.handle(HttpConnection.java:427)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.handle(SelectChannelEndPoint.java:510)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint.access$000(SelectChannelEndPoint.java:34)
	at org.eclipse.jetty.io.nio.SelectChannelEndPoint$1.run(SelectChannelEndPoint.java:40)
	at org.eclipse.jetty.util.thread.QueuedThreadPool$2.run(QueuedThreadPool.java:450)
	at java.lang.Thread.run(Thread.java:680)
============= end nested exception, level (1) ===========
Cleanup action completed
